{"version":3,"sources":["webpack:///./node_modules/vuex-class/lib/bindings.js","webpack:///./src/components/Player.vue?7aaf","webpack:///./src/components/Player.vue?b82f","webpack:///./src/components/Player.vue","webpack:///./src/pages/search/search.vue?4f6c","webpack:///./src/pages/search/search.vue?db07","webpack:///./src/pages/search/search.vue"],"names":["Action","createBindingHelper","vuex_esm","bindTo","mapFn","makeDecorator","map","namespace","Object","vue_class_component_common","componentOptions","key","_a","mapObject","undefined","a","b","proto","options","n","length","extractNamespace","_super","Player","_this","apply","this","arguments","fetching","isplay","duration","song","interval","progress","elapsed","progressIntervalId","lyrics","index","LINE_HEIGHT","lyricIntervalId","tslib_es6","defineProperty","prototype","$store","state","isShowPlayer","isPlay","$refs","audio","$progress","lyricsLines","created","init","mounted","document","body","classList","add","getData","songid","then","res","lyric","text","formatText","match","catch","err","console","error","onPlay","$audio","play","setPlayState","startLyrics","startProgress","pause","pauseLyrics","pauseProgress","onEnd","restartProgress","restartLyrics","setInterval","updateLyrics","bind","clearInterval","ontimeupdate","e","i","l","currentTime","getSeconds","$lyricsLines","children","remove","y","style","transform","resetLyrics","updateProgress","resetProgress","getAlbumCover","id","utils","getSongUrl","exit","cancelPlayer","line","replace","p1","p2","parseFloat","div","createElement","innerHTML","innerText","vue_property_decorator_umd","String","vue_class_component_common_default","mixins","mixin","vue_esm","selectortype_template_index_0_src_components_Player","render","_vm","_h","$createElement","_c","_self","attrs","name","directives","rawName","value","expression","class","show","staticClass","src","albummid","alt","_v","domProps","_s","songname","artist","on","click","ref","_l","list","slice","_f","href","backgroundImage","songmid","ended","$event","staticRenderFns","src_components_Player","__webpack_require__","normalizeComponent","components_Player","ssrContext","search","hotkeys","data","keyword","getLastKeyword","isLoad","page","isShowCancel","isShowDelete","isShowHistory","isShowSearchResults","songsObject","searchResult","history","isGetHotKey","hotkey","shuffle","window","addEventListener","onScroll","localStorage","getItem","split","enter","reset","keyCode","addHistory","onClick","target","matches","setLocalStorageData","indexOf","previousElementSibling","splice","loading","curpage","concat","message","accomplish","log","removeEventListener","documentElement","clientHeight","pageYOffset","scrollHeight","unshift","array","count","arr","len","Math","min","temp","random","floor","showPlayerDetail","showPlayer","getSong","components","selectortype_template_index_0_src_pages_search_search","modifiers","trim","type","placeholder","keyup","input","composing","blur","$forceUpdate","item","_e","special_url","special_key","k","search_Component","search_normalizeComponent","pages_search_search","__webpack_exports__"],"mappings":"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","file":"static/js/0.8413109ca33965849bfc.js","sourcesContent":["import { createDecorator } from 'vue-class-component';\nimport { mapState, mapGetters, mapActions, mapMutations } from 'vuex';\nexport var State = createBindingHelper('computed', mapState);\nexport var Getter = createBindingHelper('computed', mapGetters);\nexport var Action = createBindingHelper('methods', mapActions);\nexport var Mutation = createBindingHelper('methods', mapMutations);\nexport function namespace(namespace, helper) {\n    function namespacedHelper(a, b) {\n        if (typeof b === 'string') {\n            var key = b;\n            var proto = a;\n            return helper(key, { namespace: namespace })(proto, key);\n        }\n        var type = a;\n        var options = merge(b || {}, { namespace: namespace });\n        return helper(type, options);\n    }\n    return namespacedHelper;\n}\nfunction createBindingHelper(bindTo, mapFn) {\n    function makeDecorator(map, namespace) {\n        return createDecorator(function (componentOptions, key) {\n            if (!componentOptions[bindTo]) {\n                componentOptions[bindTo] = {};\n            }\n            var mapObject = (_a = {}, _a[key] = map, _a);\n            componentOptions[bindTo][key] = namespace !== undefined\n                ? mapFn(namespace, mapObject)[key]\n                : mapFn(mapObject)[key];\n            var _a;\n        });\n    }\n    function helper(a, b) {\n        if (typeof b === 'string') {\n            var key = b;\n            var proto = a;\n            return makeDecorator(key, undefined)(proto, key);\n        }\n        var namespace = extractNamespace(b);\n        var type = a;\n        return makeDecorator(type, namespace);\n    }\n    return helper;\n}\nfunction extractNamespace(options) {\n    var n = options && options.namespace;\n    if (typeof n !== 'string') {\n        return undefined;\n    }\n    if (n[n.length - 1] !== '/') {\n        return n + '/';\n    }\n    return n;\n}\nfunction merge(a, b) {\n    var res = {};\n    [a, b].forEach(function (obj) {\n        Object.keys(obj).forEach(function (key) {\n            res[key] = obj[key];\n        });\n    });\n    return res;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vuex-class/lib/bindings.js\n// module id = null\n// module chunks = ","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport Component from 'vue-class-component';\nimport { songUrl, lyricsUrl, albumCoverUrl } from '../config/utils';\nimport { Action } from 'vuex-class';\nimport { Prop, Watch } from 'vue-property-decorator';\nimport mixin from '../config/mixin';\nimport { getLyrics } from '../service/getData';\n\n@Component({\n    mixins: [mixin]\n})\nexport default class Player extends Vue {\n    @Prop(Object) song;\n\n    @Prop(String) artist;\n\n    @Action('cancelPlayer') cancelPlayer;\n    @Action('setPlayState') setPlayState;\n    \n\n    fetching = false; // 是否正在加载\n    isplay = false; // 是否 play\n\n    duration = this.song.interval; //持续时间\n    progress = 0; //进度条\n    elapsed = 0; //当前时间\n    progressIntervalId = 0; // 进度条setInterval 返回的 id\n\n    lyrics = []; //歌词\n    index = 0; // 歌词页数\n    LINE_HEIGHT = 42; // 歌词的高度\n    lyricIntervalId = 0; // 歌词setInterval 返回的 id\n\n    // 使用 ref 的问题 参考 https://github.com/vuejs/vue-class-component/issues/94\n    // $refs: {\n    //     audio: HTMLAudioElement\n    // }\n\n    // 计算isShowPlayer\n    get isShowPlayer() {\n        return this.$store.state.isShowPlayer;\n    }\n\n    get isPlay() {\n        return this.$store.state.isPlay;\n    }\n\n    get $audio() {\n        return this.$refs.audio as HTMLAudioElement;\n    }\n\n    get $progress() {\n        return this.$refs.$progress as HTMLDivElement;\n    }\n\n    get $lyricsLines() {\n        return this.$refs.lyricsLines as HTMLDivElement;\n    }\n\n    created() {\n        this.init();\n    }\n\n    mounted() {\n        document.body.classList.add('noscroll');\n    }\n\n    // 初始化\n    init() {\n        this.fetching = true;\n        getLyrics(this.song.songid)\n            .then(res => res.lyric)\n            .then(text => {\n                this.index = 0;\n                this.lyrics = this.formatText(text).match(/^\\[\\d{2}:\\d{2}.\\d{2}\\](.+)$/gm);\n            })\n            .catch(err => console.error(err))\n            .then(() => (this.fetching = false));\n    }\n\n    // 播放音频\n    onPlay() {\n        this.isplay = !this.isplay;\n        // 如果是 play\n        if (this.isplay) {\n            if (this.fetching) return;\n            this.$audio.play();\n            this.setPlayState(true);\n            this.startLyrics();\n            this.startProgress();\n        } else { // 如果是 pause\n            this.$audio.pause();\n            this.setPlayState(false); // 设置 play 的状态\n            this.pauseLyrics();\n            this.pauseProgress();\n        }\n    }\n\n    // 当一首歌播放结束的时候重新播放\n    onEnd() {\n        this.$audio.play();\n        this.restartProgress();\n        this.restartLyrics();\n    }\n\n    startLyrics() {\n        this.pauseLyrics();\n        this.lyricIntervalId = setInterval(this.updateLyrics.bind(this), 1000);\n    }\n\n    // 暂停歌词\n    pauseLyrics() {\n        clearInterval(this.lyricIntervalId);\n    }\n\n    //更新歌词\n    updateLyrics() {\n        let _this = this;\n        this.$audio.ontimeupdate = function(e) {\n            for (let i = 0, l = _this.lyrics.length; i < l; i++) {\n                if (\n                    _this.$audio.currentTime /*当前播放的时间*/ >\n                    _this.getSeconds(_this.lyrics[i]) - 0.5\n                ) {\n                    _this.$lyricsLines.children[_this.index].classList.remove('active');\n                    _this.$lyricsLines.children[i].classList.add('active');\n                    _this.index = i;\n                }\n            }\n        };\n        if (this.index > 2) {\n            let y = -(this.index - 2) * this.LINE_HEIGHT;\n            this.$lyricsLines.style.transform = `translateY(${y}px)`;\n        }\n    }\n\n    // 重置歌词\n    resetLyrics() {\n         this.pauseLyrics();\n         this.$lyricsLines.children[this.index].classList.remove('active');\n         this.index = 0;\n         this.$lyricsLines.style.transform = `translateY(0)`;\n         if (this.lyrics.length) {\n             this.$lyricsLines.children[this.index].classList.add('active');\n         }\n    }\n\n    // 重新开始歌词\n    restartLyrics() {\n         this.resetLyrics();\n         this.startLyrics();\n    }\n\n    // 启动进度条\n    startProgress() {\n        this.pauseProgress();\n        this.progressIntervalId = setInterval(this.updateProgress.bind(this), 50);\n    }\n\n    // 暂停进度条\n    pauseProgress() {\n        clearInterval(this.progressIntervalId);\n    }\n\n    // 更新进度条\n    updateProgress() {\n        this.elapsed += 0.05;\n        this.progress = this.elapsed / this.duration;\n        this.$progress.style.transform = `translateX(${this.progress * 100 - 100}%)`;\n    }\n\n    //重置进度条\n    resetProgress(duration?: number) {\n        let $progress = this.pauseProgress();\n        this.elapsed = 0;\n        this.progress = 0;\n        this.$progress.style.transform = 'translate(-100%)';\n        if (duration) {\n            this.duration = +duration;\n        }\n    }\n\n    // 重新开始进度条\n    restartProgress() {\n        this.resetProgress();\n        this.startProgress();\n    }\n\n    // 获取图片地址\n    getAlbumCover(id: number) {\n        return albumCoverUrl(id);\n    }\n\n    // 获取歌词的地址\n    getSongUrl(id: number) {\n        return songUrl(id);\n    }\n\n    //退出 player\n    exit() {\n        this.cancelPlayer();\n        this.setPlayState(false);\n        document.body.classList.remove('noscroll');\n    }\n\n    //获取秒数\n    getSeconds(line) {\n        return +line.replace(\n            /^\\[(\\d{2}):(\\d{2}\\.\\d{2}).*/,\n            (match, p1, p2) => +p1 * 60 + parseFloat(<any>+p2)\n        );\n    }\n\n    //格式化文本 类似[xx:xx.xx]xxxxx\n    formatText(text) {\n        let div = document.createElement('div');\n        div.innerHTML = text;\n        return div.innerText;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/Player.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"show-transition\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowPlayer),expression:\"isShowPlayer\"}],class:{show: _vm.isShowPlayer},attrs:{\"id\":\"player\"}},[_c('div',{staticClass:\"player-container\"},[_c('div',{staticClass:\"player-header\"},[_c('img',{staticClass:\"album-cover\",attrs:{\"src\":_vm.getAlbumCover(_vm.song.albummid),\"alt\":\"图片\"}}),_vm._v(\" \"),_c('div',{staticClass:\"song-info\"},[_c('div',{staticClass:\"song-name\",domProps:{\"innerHTML\":_vm._s(_vm.song.songname)}}),_vm._v(\" \"),_c('div',{staticClass:\"song-artist\",domProps:{\"innerHTML\":_vm._s(_vm.artist)}})]),_vm._v(\" \"),_c('span',{staticClass:\"icon-action icon-play\",class:[_vm.isPlay? 'icon-pause':'icon-play'],on:{\"click\":_vm.onPlay}})]),_vm._v(\" \"),_c('div',{staticClass:\"player-lyrics\"},[_c('div',{ref:\"lyricsLines\",staticClass:\"player-lyrics-lines\"},[_vm._l((_vm.lyrics),function(list){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.lyrics.length !== 0),expression:\"lyrics.length !== 0\"}],staticClass:\"player-lyrics-line\"},[_vm._v(_vm._s(list.slice(10)))])}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.fetching),expression:\"fetching\"}],staticClass:\"player-lyrics-line\"},[_vm._v(\"正在加载歌词,请等待...\")])],2)]),_vm._v(\" \"),_c('div',{staticClass:\"player-footer\"},[_c('div',{staticClass:\"icon-list\",on:{\"click\":_vm.exit}}),_vm._v(\" \"),_c('div',{staticClass:\"progress\"},[_c('div',{staticClass:\"progress-time progress-elapsed\"},[_vm._v(_vm._s(_vm._f(\"formatTime\")(_vm.elapsed)))]),_vm._v(\" \"),_c('div',{staticClass:\"progress-bar\"},[_c('div',{ref:\"$progress\",staticClass:\"progress-bar-progress\"})]),_vm._v(\" \"),_c('div',{staticClass:\"progress-time progress-duration\"},[_vm._v(_vm._s(_vm._f(\"formatTime\")(_vm.song.interval)))])]),_vm._v(\" \"),_c('div',{staticClass:\"action\"},[_c('a',{staticClass:\"btn-download\",attrs:{\"href\":\"#\"}},[_vm._v(\"下载这首歌\")])])])]),_vm._v(\" \"),_c('div',{staticClass:\"player-background\",style:({backgroundImage: 'url('+_vm.getAlbumCover(_vm.song.albummid)+')'})}),_vm._v(\" \"),_c('audio',{ref:\"audio\",attrs:{\"src\":_vm.getSongUrl(_vm.song.songmid)},on:{\"ended\":function($event){_vm.onEnd()}}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b526c8f6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Player.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b526c8f6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Player.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!ts-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Player.vue\"\nimport __vue_script__ from \"!!ts-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Player.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b526c8f6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Player.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b526c8f6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Player.vue\n// module id = null\n// module chunks = ","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport Component from 'vue-class-component';\nimport { hotList, searchList } from '../../service/getData';\n// import { mapState, mapMutations, mapActions } from 'vuex';\n// import * as actions from '../../store/action';\nimport { Action } from 'vuex-class';\nimport { Watch } from 'vue-property-decorator';\nimport Player from '../../components/Player.vue';\n\n@Component({\n    components: {\n        Player\n    }\n})\nexport default class search extends Vue {\n    hotkeys = null; //获取黑色的 hotkey\n    data = ''; //获取红色的 hotkey\n    keyword = ''; // 获取用户的搜索内容\n    getLastKeyword = ''; // 获取用户上一次的搜索内容\n    fetching = false; //正在 fetch\n    isLoad = true; //能否继续加载数据\n    page = 1; //默认页数为1\n    isShowCancel = false; // 是否显示取消\n    isShowDelete = false; // 是否显示取消\n    isShowHistory = false; // 是否显示历史记录\n    isShowSearchResults = false; //是否显示搜索结果\n    songsObject = {}; // 存放歌曲,用来判断是否搜索改变了\n    searchResult = null; //搜索结果\n    history = []; // 放历史记录\n    isGetHotKey = false // 是否获得 hotkey\n\n    @Action('setLocalStorageData') setLocalStorageData;\n    @Action('showPlayer') showPlayer;\n    @Action('getSong') getSong;\n\n    // 计算 song\n    get song() {\n        return this.$store.state.song;\n    }\n\n    // 计算artist\n    get artist() {\n        return this.$store.state.artist;\n    }\n\n    // 计算 isShowPlayer\n    get isShowPlayer() {\n        return this.$store.state.isShowPlayer;\n    }\n\n    created() {\n        hotList().then(res => {\n            let hotkey = res.data.hotkey;\n            this.data = res.data;\n            this.hotkeys = this.shuffle(hotkey, 6);\n            this.isGetHotKey = true;\n        });\n    }\n\n    mounted() {\n        window.addEventListener('scroll', this.onScroll.bind(this));\n        this.history = localStorage.getItem('SET_HISTORY_KEY')\n            ? localStorage.getItem('SET_HISTORY_KEY').split(',')\n            : [];\n    }\n\n    // 用户按 enter 时\n    enter(e) {\n        if (this.keyword) {\n            this.isShowDelete = true;\n        } else {\n            this.isShowDelete = false;\n            this.reset();\n        }\n        if (e.keyCode !== 13) return;\n        this.isShowHistory = false;\n        this.isShowSearchResults = true;\n        this.addHistory(this.keyword);\n        this.search(this.keyword);\n    }\n\n    // 点击事件\n    onClick(e) {\n        //如果点击到了输入按钮\n        if (e.target.matches('#search')) {\n            this.isShowCancel = true;\n            this.isShowHistory = true;\n        }\n\n        //如果点击到了取消按钮\n        if (e.target.matches('.search-cancel')) {\n            this.isShowCancel = false;\n            this.isShowDelete = false;\n            this.isShowHistory = false;\n            this.reset();\n        }\n\n        //如果点击到了删除按钮\n        if (e.target.matches('.icon-delete')) {\n            this.isShowDelete = false;\n            this.reset();\n        }\n\n        // 如果匹配到了清除搜索记录\n        if (e.target.matches('.record-delete')) {\n            this.history = [];\n            this.setLocalStorageData(this.history);\n        }\n\n        //如果匹配到了单条记录的删除按钮\n        if (e.target.matches('.icon .icon-close')) {\n            let index = this.history.indexOf(e.target.previousElementSibling.innerHTML);\n            this.history.splice(index, 1);\n            this.setLocalStorageData(this.history);\n        }\n\n        //如果点到了热门搜索的关键词或者点到了搜索记录的歌\n        if (e.target.matches('.tag-keyword') || e.target.matches('.record-con')) {\n            this.keyword = e.target.innerHTML;\n            this.isShowDelete = true;\n            this.isShowCancel = true;\n            this.isShowHistory = false;\n            this.isShowSearchResults = true;\n            this.addHistory(this.keyword);\n            this.search(this.keyword);\n        }\n    }\n\n    // 搜索\n    search(keyword, page?: number) {\n        //刚进来时 keyword为 undefined ，因为没有 enter\n        if (keyword === undefined) keyword = '';\n        if (keyword === '') return;\n        //如果已经搜索过，并且没有改动 keyword 那么直接返回\n        if (this.getLastKeyword === keyword && this.songsObject[page || this.page]) return;\n        if (this.getLastKeyword !== keyword) this.reset();\n        if (this.fetching || !this.isLoad) return;\n        this.getLastKeyword = keyword;\n        this.loading();\n        searchList(keyword, page || this.page)\n            .then(res => {\n                this.page = res.data.song.curpage;\n                this.songsObject[this.page] = res.data.song.list;\n                if (this.searchResult) {\n                    this.searchResult = this.searchResult.concat(res.data.song.list);\n                } else {\n                    this.searchResult = res.data.song.list;\n                }\n                this.isLoad = res.message !== 'no results';\n            })\n            .then(() => this.accomplish())\n            .catch(err => {\n                console.log(err);\n            });\n    }\n\n    // 滚动事件\n    onScroll(e) {\n        if (this.isLoad) {\n            if (\n                document.documentElement.clientHeight + pageYOffset >\n                document.body.scrollHeight - 100\n            ) {\n                this.search(this.keyword, this.page + 1);\n            }\n        } else {\n            return window.removeEventListener('scroll', this.onScroll.bind(this));\n        }\n    }\n\n    // 全部渲染完成，没有歌了\n    accomplish() {\n        this.fetching = false;\n    }\n\n    // 显示正在加载动画\n    loading() {\n        this.fetching = true;\n    }\n\n    // 重置\n    reset() {\n        this.page = 1;\n        this.isLoad = true;\n        this.songsObject = {};\n        this.searchResult = null;\n    }\n\n    // 添加历史\n    addHistory(keyword) {\n        let index = this.history.indexOf(keyword);\n        if (index === -1) {\n            this.history.unshift(keyword);\n            this.setLocalStorageData(this.history);\n        }\n    }\n\n    //洗牌\n    shuffle(array, count: number) {\n        let arr = [];\n        let len = Math.min(count, array.length);\n        for (let i = 0; i < len; i++) {\n            let temp = array;\n            let random = Math.floor(Math.random() * temp.length);\n            arr[i] = temp[random];\n            array.splice(random, 1);\n        }\n        return arr;\n    }\n\n    // 显示 player 的信息\n    showPlayerDetail(list) {\n        this.showPlayer();\n        this.getSong({ ...list });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/pages/search/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tab-contents\"},[_c('div',{staticClass:\"search-view tab-content\",on:{\"click\":function($event){_vm.onClick($event)}}},[_c('div',{staticClass:\"search-bar\"},[_c('div',{staticClass:\"input-wrap\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.keyword),expression:\"keyword\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"id\":\"search\",\"placeholder\":\"搜索歌曲、歌单、专辑\"},domProps:{\"value\":(_vm.keyword)},on:{\"keyup\":function($event){_vm.enter($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.keyword=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}}),_vm._v(\" \"),_c('span',{staticClass:\"icon-search\"}),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowDelete),expression:\"isShowDelete\"}],staticClass:\"icon-delete\"},[_vm._v(\"删除\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowCancel),expression:\"isShowCancel\"}],staticClass:\"search-cancel\"},[_vm._v(\"取消\")])]),_vm._v(\" \"),(_vm.history.length > 0 && _vm.isShowHistory)?_c('div',{staticClass:\"record-keys\"},[_vm._l((_vm.history),function(item){return _c('li',[_c('div',{staticClass:\"record-main\"},[_c('span',{staticClass:\"icon icon-clock\"}),_vm._v(\" \"),_c('span',{staticClass:\"record-con ellipsis\"},[_vm._v(_vm._s(item))]),_vm._v(\" \"),_c('span',{staticClass:\"icon icon-close\"})])])}),_vm._v(\" \"),_c('p',{staticClass:\"record-delete\"},[_vm._v(\"清除搜索记录\")])],2):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowSearchResults),expression:\"isShowSearchResults\"}],staticClass:\"search-results\"},[_c('div',{staticClass:\"song-list\"},_vm._l((_vm.searchResult),function(list){return _c('div',{key:list.songid,staticClass:\"song-item\",on:{\"click\":function($event){_vm.showPlayerDetail(list)}}},[_c('i',{staticClass:\"icon icon-music\"}),_vm._v(\" \"),_c('div',{staticClass:\"song-name\",domProps:{\"innerHTML\":_vm._s(list.songname)}}),_vm._v(\" \"),_c('div',{staticClass:\"song-artist\"},_vm._l((list.singer),function(artist){return _c('span',{domProps:{\"innerHTML\":_vm._s(artist.name+'&nbsp;')}})}))])})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.fetching),expression:\"fetching\"}],staticClass:\"search-loading show\"},[_c('i',{staticClass:\"loading-icon\"}),_vm._v(\" \"),_c('div',{staticClass:\"loading-text\"},[_vm._v(\"正在载入更多...\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLoad),expression:\"!isLoad\"}],staticClass:\"search-loading show\"},[_c('div',{staticClass:\"loading-done\"},[_vm._v(\"已加载全部\")])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isShowHistory && !_vm.isShowSearchResults),expression:\"!isShowHistory && !isShowSearchResults\"}],staticClass:\"mod-search-result\",attrs:{\"id\":\"hot-keys\"}},[_c('h3',{staticClass:\"result-tit\"},[_vm._v(\"热门搜索\")]),_vm._v(\" \"),(_vm.isGetHotKey)?_c('div',{staticClass:\"result-tags\"},[(_vm.data.special_url)?_c('a',{staticClass:\"tag tag-hot\",attrs:{\"href\":_vm.data.special_url}},[_vm._v(_vm._s(_vm.data.special_key))]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.hotkeys),function(hotkey){return _c('div',{key:hotkey.n,staticClass:\"tag tag-keyword\"},[_vm._v(_vm._s(hotkey.k))])})],2):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isGetHotKey),expression:\"!isGetHotKey\"}],staticClass:\"search-loading show\"},[_c('i',{staticClass:\"loading-icon\"}),_vm._v(\" \"),_c('div',{staticClass:\"loading-text\"},[_vm._v(\"正在加载...\")])])])]),_vm._v(\" \"),(_vm.isShowPlayer)?_c('player',{attrs:{\"song\":_vm.song,\"artist\":_vm.artist}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-253d69cc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/search/search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-253d69cc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!ts-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!ts-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-253d69cc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-253d69cc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/search/search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}